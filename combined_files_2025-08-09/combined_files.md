# Consolidated Documentation and Conversation Summary – 2025-08-09

## 1. Introduction

이 문서는 2025년 8월 9일에 진행된 대화와 관련하여 생성된 다양한 마크다운 파일과 논의 내용을 하나로 통합한 것입니다. 
주요 주제는 **1인 개발자 로드맵**, **웹 자동입력 서비스 설계**, **장기요양보험 급여청구 자동화**, **문서 추출 및 입력 파이프라인**, **보안·라이선스 정책**, 그리고 **개발 환경 구성** 등이었습니다. 
또한 웹스크래핑 학습 사이트를 활용한 난이도 높은 시나리오 테스트도 포함되어 있습니다.

## 2. 웹 자동입력 기획서 템플릿

### 2.1 목적 및 배경

요양원 직원이 매월 반복적으로 수행하는 **장기요양보험 급여청구 작업**을 자동화하여 시간과 오류를 줄이는 것을 목표로 합니다. 공공 포털은 인증서 로그인과 복잡한 입력 절차를 요구하기 때문에 반자동/완전자동화 방안을 함께 고려합니다.

### 2.2 요구 사항

- 사용자는 프로그램을 실행하여 로그인 후 자동입력을 시작할 수 있어야 합니다.
- 엑셀 및 HWP 서식에서 데이터를 추출하여 포털에 입력하거나 임포트 파일로 업로드할 수 있어야 합니다.
- 오류 발생 시 재시도 로직과 상세한 로그 기록이 필요합니다.
- 보안 인증서 및 개인정보 보호법을 준수해야 합니다.

### 2.3 주요 기능

- **자동입력 매크로**: 사용자 클릭/입력 동작을 기록하고 재실행합니다. 입력 변수는 YAML/CSV에서 불러옵니다.
- **문서 다운로드 및 추출**: HWP·PDF·Excel 파일을 자동으로 다운로드하여 필요한 데이터를 추출합니다. HWP는 PDF/DOCX 변환 후 추출하는 방식을 권장합니다.
- **엑셀 검증 및 임포트 변환**: schema.yaml로 데이터를 검증하고 포털 임포트 양식에 맞춰 변환합니다.
- **스케줄 실행**: 매월 마감일 전에 자동으로 실행되도록 예약할 수 있습니다.
- **로그·알림**: 작업 성공/실패를 기록하고, 문제가 발생하면 이메일·메신저로 알림을 보냅니다.

## 3. 기술 스택 및 개발 가이드

### 3.1 백엔드/자동화

- **Playwright (Python)**: 브라우저 자동화 엔진. headless/headed 모드 전환이 가능하며, 스크린샷과 파일 다운로드 API를 제공합니다.
- **Python 환경**: 데이터 처리와 서버 관리에 사용합니다. `openpyxl`로 엑셀을 처리하고, YAML 파싱에 `PyYAML`을 활용합니다.
- **Node.js (선택)**: Puppeteer 기반 구현이 필요할 경우 선택할 수 있습니다.
- **Docker**: 의존성을 묶어 동일한 환경을 보장하고 배포를 단순화합니다. 컨테이너 내부에 Playwright 브라우저와 Python 패키지를 설치합니다【546357476445486†L89-L100】.

### 3.2 프론트엔드/콘솔

- **React + TailwindCSS**: 사용자에게 작업 상태와 로그를 제공하는 콘솔 UI를 구현합니다. 콘솔에서는 엑셀 업로드, 스케줄 설정, 결과 확인 등을 할 수 있습니다.
- **Electron (선택)**: 데스크톱 클라이언트 구현 시 사용합니다.

### 3.3 데이터 저장

- **SQLite 또는 PostgreSQL**: 청구 내역, 로그인 세션, 추출된 데이터, 실행 로그를 저장하는 데 사용합니다.
- **환경 변수와 암호화**: 인증서 비밀번호와 세션 쿠키는 암호화하여 저장합니다.

## 4. MVP 체크리스트

1. **요구사항 정의** – 대상 메뉴(급여청구)와 입력 필드를 명확히 파악합니다.
2. **Playwright 셀렉터 맵핑** – 로그인 후 페이지 셀렉터를 수집하고 YAML에 정리합니다.
3. **문서 파싱 모듈 구현** – HWP 변환, PDF/Excel 읽기, 데이터 정규화 로직 작성.
4. **자동입력 스크립트** – 입력 순서와 오류 처리 로직 포함.
5. **임포트 기능** – 포털 양식 헤더에 맞춰 엑셀 파일 변환 및 업로드 자동화.
6. **에러/로그 시스템** – 실패 시 스크린샷과 로그 저장, 이메일 알림 기능.
7. **테스트 환경 구축** – 가상 포털 서버 및 학습 사이트(web‑scraping.dev)로 테스트하여 셀렉터 변경 대응과 자가치유를 검증합니다【288162828163965†L31-L60】.

## 5. 보안 및 라이선스 정책 초안

### 5.1 라이선스 관리

- 고객사별로 식별자와 라이선스 키를 임베딩하여 무단복제를 방지합니다.
- 단기 오프라인 토큰(예: 7일)을 사용하여 주기적으로 서버와 재검증합니다.
- 서버에서 기능별 플래그를 제어하여 구독 만료 시 기능을 제한할 수 있습니다.

### 5.2 보안 설계

- 인증서와 로그인 정보는 OS 보안 저장소(DPAPI 등)에 암호화하여 저장합니다.
- TLS 및 인증서 고정(pinning)으로 전송 구간을 보호합니다.
- 작업 로그는 개인정보를 마스킹한 메타데이터만 업로드하며, 원본 데이터는 로컬에 저장합니다.
- 셀렉터와 시나리오 매핑 파일은 암호화된 형태로 배포하여 역공학을 어렵게 합니다.

## 6. 개발 환경 및 도구

- **코드 편집기**: Visual Studio Code는 Docker 컨테이너와 연동하여 개발·디버깅할 수 있는 편리한 환경을 제공합니다【340886757130353†L61-L131】. 다른 IDE를 사용해도 무방합니다.
- **Docker**: Playwright 스크립트를 실행할 일관된 환경을 제공하며, 패키지 충돌을 방지합니다. 컨테이너 내에서 Python과 Playwright를 설치해야 합니다【546357476445486†L112-L136】.
- **Git**: 소스 버전 관리를 위한 기본 도구입니다.

## 7. 대화 내용 요약

1. **1인 개발자 로드맵** – 사용자가 1인 개발자로 성공하기 위한 기획·개발·배포·마케팅 전체 프로세스를 제안했습니다.
2. **웹 자동입력 서비스 설계** – autoinput.co.kr과 유사한 웹 매크로 서비스 아이디어를 구체화하고, Playwright를 이용한 자동화 구조를 설명했습니다.
3. **요양원 급여청구 자동화** – 장기요양보험 포털의 급여청구 프로세스를 자동화하기 위한 스타터 키트와 가상 포털 서버를 제공했습니다.
4. **문서 추출 파이프라인** – HWP 변환 후 데이터 추출, 엑셀 검증 및 DB 저장, 자동입력 연동 파이프라인을 설계했습니다. HWP는 PDF/DOCX로 변환 후 추출하는 것이 안정적이라고 제안했습니다.
5. **셀렉터 자가치유 및 페이지 모니터링** – 레코딩 시 다중 셀렉터와 점수를 저장하고 실행 중 실패 시 유사도 기반으로 대체하는 로직을 설계했습니다. DOM 해시 기반 변경 감지와 리그레션 잡을 통해 정기적으로 페이지 변화를 감지합니다.
6. **SaaS 콘솔 + 로컬 에이전트 구조** – 인증서 로그인 문제를 해결하기 위해 콘솔은 클라우드에서, 실제 자동화는 로컬 에이전트에서 실행하는 하이브리드 구조를 제안했습니다. 라이선스 관리와 도용 방지, 무결성 검사 등도 논의했습니다.
7. **개발 환경과 도구** – ChatGPT가 생성한 코드를 실행하려면 Python/Playwright 런타임과 코드 편집기가 필요하며, Docker를 통해 환경을 일관되게 유지할 수 있음을 설명했습니다. Docker만으로 개발할 수 있지만, VS Code를 사용하면 개발·디버깅이 편리합니다.
8. **web‑scraping.dev 학습 사이트** – 다양한 웹 패턴(무한 스크롤, CSRF 토큰, 쿠키 기반 로그인 등)을 테스트할 수 있는 mock 사이트를 활용하여 셀렉터 자가치유 및 자동화 코드를 검증하기로 했습니다【288162828163965†L31-L60】.

## 8. 맺음말

이 문서는 앞선 대화에서 생성·제공한 마크다운 자료와 주요 논의 내용을 한데 모은 요약본입니다. 실제 프로젝트를 추진할 때 이 문서를 참고하여 전체 흐름과 필요한 모듈을 점검하고, 추가 구현이나 테스트를 계획하시면 좋습니다.