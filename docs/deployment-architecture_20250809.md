# 🏗️ AutoInput 배포 아키텍처 및 사용 환경

## 📊 배포 모델 비교 분석

### 1. 🌐 **완전 웹 기반 (SaaS)**
사용자가 웹 브라우저만으로 모든 기능을 사용

#### 아키텍처
```
[사용자 브라우저] 
    ↓ HTTPS
[웹 서버 (Frontend)]
    ↓ API
[애플리케이션 서버]
    ↓
[자동화 엔진 (Cloud)]
    ↓
[타겟 사이트]
```

#### 장점
- ✅ **설치 불필요**: 브라우저만 있으면 즉시 사용
- ✅ **자동 업데이트**: 서버 업데이트로 모든 사용자 즉시 적용
- ✅ **중앙 관리**: 모니터링, 로그, 보안 관리 용이
- ✅ **멀티 디바이스**: PC, 태블릿, 모바일 모두 가능
- ✅ **협업 기능**: 실시간 데이터 공유, 팀 작업 가능

#### 단점
- ❌ **공인인증서 문제**: 브라우저에서 직접 처리 불가
- ❌ **보안 우려**: 민감한 의료 데이터 외부 서버 저장
- ❌ **네트워크 의존**: 인터넷 연결 필수
- ❌ **속도 제한**: 네트워크 지연으로 인한 성능 저하
- ❌ **법적 이슈**: 의료정보 클라우드 저장 규제

#### 기술적 제약
```yaml
공인인증서:
  문제: 브라우저 보안 정책으로 로컬 인증서 접근 불가
  해결: 별도 에이전트 필요

파일 시스템:
  문제: 웹에서 로컬 파일 직접 접근 불가
  해결: 업로드/다운로드 방식

보안 모듈:
  문제: 정부 사이트 보안 프로그램 실행 불가
  해결: 별도 플러그인 필요
```

---

### 2. 💻 **완전 로컬 설치 (Desktop)**
사용자 PC에 프로그램 설치

#### 아키텍처
```
[사용자 PC]
  ├── AutoInput.exe (설치 프로그램)
  ├── 자동화 엔진 (Playwright)
  ├── 로컬 DB (SQLite)
  └── 공인인증서 연동
      ↓
[타겟 사이트]
```

#### 장점
- ✅ **공인인증서 완벽 지원**: 로컬 인증서 직접 접근
- ✅ **빠른 속도**: 네트워크 지연 없음
- ✅ **데이터 보안**: 모든 데이터 로컬 저장
- ✅ **오프라인 가능**: 인터넷 없이도 일부 기능 사용
- ✅ **법적 안전**: 의료정보 외부 유출 없음

#### 단점
- ❌ **설치 필요**: 각 PC마다 개별 설치
- ❌ **업데이트 번거로움**: 수동 업데이트 필요
- ❌ **유지보수 어려움**: PC별 문제 해결 어려움
- ❌ **협업 불가**: 데이터 공유 어려움
- ❌ **라이선스 관리**: 불법 복제 방지 어려움

#### 기술 스택
```yaml
Frontend: Electron + React
Backend: Python FastAPI (로컬)
Database: SQLite
Automation: Playwright
Packaging: PyInstaller / Electron Builder
Update: Electron Updater
```

---

### 3. 🔄 **하이브리드 모델** ⭐ 추천
웹 서비스 + 로컬 에이전트 조합

#### 아키텍처
```
[웹 브라우저] ←→ [로컬 에이전트]
      ↓              ↓
[웹 서버]      [공인인증서]
      ↓              ↓
[API 서버]     [타겟 사이트]
      ↓
[중앙 DB]
```

#### 구성 요소
1. **웹 포털**: 대시보드, 설정, 보고서
2. **로컬 에이전트**: 자동화 실행, 인증서 처리
3. **API 서버**: 데이터 동기화, 업무 조율

#### 장점
- ✅ **공인인증서 지원**: 로컬 에이전트가 처리
- ✅ **중앙 관리 가능**: 웹에서 모니터링
- ✅ **선택적 클라우드**: 민감하지 않은 데이터만 동기화
- ✅ **자동 업데이트**: 에이전트 자동 업데이트
- ✅ **협업 가능**: 팀 단위 작업 지원

#### 단점
- ❌ **복잡한 구조**: 개발 및 유지보수 복잡
- ❌ **부분 설치 필요**: 에이전트는 설치 필요
- ❌ **동기화 이슈**: 온/오프라인 데이터 동기화

---

## 🎯 우리의 선택: 하이브리드 모델

### 최종 아키텍처
```
┌─────────────────────────────────────┐
│         사용자 환경                  │
├─────────────────────────────────────┤
│  웹 브라우저          로컬 에이전트  │
│  - 대시보드           - 자동화 엔진   │
│  - 보고서 조회        - 인증서 처리   │
│  - 설정 관리          - 파일 처리     │
│  - 팀 협업            - 로컬 캐시     │
└─────────────────────────────────────┘
           ↓                    ↓
┌─────────────────────────────────────┐
│         클라우드 서버                │
├─────────────────────────────────────┤
│  - API 서버 (FastAPI)                │
│  - 웹 서버 (React)                   │
│  - 데이터베이스 (PostgreSQL)         │
│  - 작업 큐 (Redis)                   │
│  - 모니터링 (Grafana)                │
└─────────────────────────────────────┘
```

### 구현 단계

#### Phase 1: MVP (1-2개월)
- 로컬 전용 버전 개발
- 핵심 자동화 기능 구현
- 공인인증서 연동

#### Phase 2: 웹 포털 (3-4개월)
- 웹 대시보드 개발
- 로컬 에이전트 연동
- 기본 동기화 기능

#### Phase 3: 엔터프라이즈 (5-6개월)
- 멀티 테넌트 지원
- 고급 협업 기능
- 관리자 콘솔

---

## 💾 데이터 저장 전략

### 로컬 저장 (에이전트)
```yaml
필수 로컬:
  - 공인인증서 정보
  - 로그인 세션
  - 임시 작업 데이터
  - 개인 설정

저장 방식:
  - SQLite DB
  - 암호화 파일
  - 메모리 캐시
```

### 클라우드 저장 (선택적)
```yaml
동기화 가능:
  - 작업 통계
  - 에러 로그
  - 설정 백업
  - 팀 공유 데이터

제외 항목:
  - 수급자 개인정보
  - 의료 기록
  - 인증 정보
  - 민감한 업무 데이터
```

---

## 🔒 보안 고려사항

### 데이터 보안
- **전송**: TLS 1.3 암호화
- **저장**: AES-256 암호화
- **인증**: OAuth 2.0 + JWT
- **접근제어**: RBAC 구현

### 규정 준수
- **개인정보보호법**: 최소 수집, 암호화 저장
- **의료법**: 의료정보 외부 저장 금지
- **전자서명법**: 공인인증서 안전 관리

---

## 📦 설치 및 배포

### 로컬 에이전트 설치
```bash
1. 설치 파일 다운로드 (10MB)
   - Windows: AutoInput-Setup.exe
   - Mac: AutoInput.dmg

2. 설치 과정 (2분)
   - 기본 설치 경로: C:\Program Files\AutoInput
   - 필수 구성 요소 자동 설치
   - 공인인증서 드라이버 설정

3. 초기 설정 (1분)
   - 웹 포털 연결 (선택)
   - 로컬 전용 모드 (선택)
   - 보안 설정
```

### 웹 포털 접속
```yaml
URL: https://app.autoinput.kr
지원 브라우저:
  - Chrome 90+
  - Edge 90+
  - Firefox 88+
  - Safari 14+

요구사항:
  - 인터넷 연결
  - 로컬 에이전트 (선택)
```

---

## 📊 비용 모델

### 1. 로컬 전용 라이선스
- **일회성 구매**: 500,000원/PC
- **연간 유지보수**: 100,000원/년
- **업데이트**: 1년 무료, 이후 선택

### 2. 클라우드 구독
- **Basic**: 50,000원/월 (1 사용자)
- **Team**: 40,000원/월/사용자 (5+)
- **Enterprise**: 별도 협의

### 3. 하이브리드
- **초기 비용**: 300,000원 (에이전트)
- **월 구독**: 30,000원/월 (클라우드)

---

## 🚀 기술 스택 상세

### Frontend (웹)
```javascript
// React + TypeScript
- Framework: React 18
- Language: TypeScript
- UI: Ant Design / Material-UI
- State: Redux Toolkit
- API: Axios + React Query
```

### Backend (서버)
```python
# FastAPI + Python
- Framework: FastAPI
- Language: Python 3.11+
- ORM: SQLAlchemy
- Task Queue: Celery + Redis
- WebSocket: Socket.io
```

### Local Agent
```python
# Electron + Python
- Shell: Electron
- Core: Python + Playwright
- DB: SQLite
- IPC: WebSocket
- Update: electron-updater
```

### DevOps
```yaml
Development:
  - Docker Compose
  - Hot Reload
  - Local SSL

Production:
  - AWS/Azure/NCP
  - Kubernetes
  - CI/CD: GitHub Actions
  - Monitoring: Prometheus + Grafana
```

---

## 📈 확장성 계획

### 단계별 확장
1. **Phase 1**: 단일 기관 (10-50 사용자)
2. **Phase 2**: 다중 기관 (100-500 사용자)
3. **Phase 3**: 플랫폼화 (1000+ 사용자)

### 기술적 확장
```yaml
수평 확장:
  - 로드 밸런서
  - 오토 스케일링
  - 마이크로서비스

수직 확장:
  - 고성능 서버
  - 인메모리 캐시
  - GPU 가속
```

---

## ✅ 결론 및 권장사항

### 추천 접근 방법
1. **초기**: 로컬 전용으로 MVP 개발
2. **중기**: 하이브리드 모델로 전환
3. **장기**: 완전 클라우드 옵션 제공

### 핵심 성공 요소
- ✅ 공인인증서 완벽 지원
- ✅ 의료 데이터 보안
- ✅ 쉬운 설치와 사용
- ✅ 안정적인 자동화
- ✅ 합리적인 가격

---

*Last updated: 2025-08-09*
*이 문서는 지속적으로 업데이트됩니다.*